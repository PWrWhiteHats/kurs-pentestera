FROM ubuntu:22.04

RUN apt-get update && apt-get install -y neofetch gcc sudo pip nano
RUN useradd -m student && echo "student:debil" | chpasswd
COPY data/sudoers /etc/sudoers
WORKDIR /home/student
COPY data/neofetch_premium.c .
COPY data/linpeas.sh .
RUN gcc neofetch_premium.c -o neofetch_premium
RUN chmod 4755 neofetch_premium
RUN rm neofetch_premium.c
RUN mkdir myserver
RUN chown student:student myserver
COPY data/server.py /home/student/myserver
RUN chmod 755 ./myserver/server.py
USER student
CMD [ "/bin/bash" ]
<?php

$host = 'db';
$dbname = 'postgres';
$user = 'root';
$password = 'password';

try {
    $conn = new PDO("pgsql:host=$host;dbname=$dbname", $user, $password);

    if (isset($_GET['id'])) {
        $id = $_GET['id'];
        $sql = "SELECT * FROM users WHERE id = $id";
        $result = $conn->query($sql);

        if ($result === false) {
            throw new Exception("Database query error: " . $conn->errorInfo()[2]);
        }

        $row = $result->fetch(PDO::FETCH_ASSOC);
        echo "ID: " . $row['id'] . "</br>";
        echo "Name: " . $row['username'] . "</br>";
        echo "Password: [CONFIDENTIAL] </br>";
    } else {
        echo "Please provide an ID parameter";
    }
} catch (Exception $e) {
    echo "<br />";
    echo "<b>Fatal error</b>:  " . $e->getMessage() . "<br />";
    echo "Stack trace:<br />";
    foreach ($e->getTrace() as $trace) {
        echo "#" . $trace['line'] . " " . $trace['file'] . "(" . $trace['function'] . ")<br />";
    }
}
?>